YUI.add("flickr-profile-setProfile-updater",(function(e,i){"use strict";e.namespace("ModelUpdaters")["flickr-profile-setProfile"]={run:function(s,l){var r=(function(e){var i={},s={profileDescription:"description",website:"website_url",firstName:"first_name",lastName:"last_name"};return e.fields.forEach((e=>{let l=s[e.name]||e.name;i[l]=e.value})),i.extras="full_response,expand_bbml,social_urls",i})(s);return new e.FlickrPromise({apiResponse:l.callAPI("flickr.profile.setProfile",r),personPublicProfileModel:l.getModel("person-public-profile-models",s.id)}).then(function(e){return(function(e,i,s,l){var r=e.apiResponse,t=e.personPublicProfileModel;if(r){var a={stat:r.stat,fields:[]},n=["instagram","facebook","tumblr","pinterest","twitter"];return Object.entries(r).forEach((([e,s])=>{"stat"!==e&&("description"===e?(a.fields.push({name:"profileDescription",value:s}),t.setValue("profileDescription",s),t.setValue("profileDescriptionExpanded",r.descriptionExpanded)):"website_url"===e?(a.fields.push({name:"website",value:s}),t.setValue("website",s)):"first_name"===e?(a.fields.push({name:"firstName",value:s}),t.setValue("firstName",s)):"last_name"===e?(a.fields.push({name:"lastName",value:s}),t.setValue("lastName",s)):n.indexOf(e)>-1?(a.fields.push({name:e,value:s}),t.setValue(e,s),t.setValue(e+"Url",r[e+"Url"])):void 0===s?(a.fields.push({name:e,value:i[e]}),t.setValue(e,i[e])):(a.fields.push({name:e,value:s}),t.setValue(e,s)))})),a}})(e,r)}.bind(this),e.FetcherErrorLogger(i))}}}),"@VERSION@",{requires:["flickr-promise"],optional:["person-public-profile-models"]});YUI.add("flickr-account-changeFirstAndLastName-updater",(function(e,a){"use strict";e.namespace("ModelUpdaters")["flickr-account-changeFirstAndLastName"]={run:function(r,n){var i=(function(e){return{first_name:e.firstName,last_name:e.lastName}})(r);return new e.FlickrPromise({apiResponse:n.callAPI("flickr.account.changeFirstAndLastName",i),publicProfileModel:n.getModel("person-public-profile-models",r.id)}).then(function(e){return(function(e,a,r,n){var i=e.apiResponse,s=e.publicProfileModel;if(i)return i.newNames&&(void 0!==i.newNames.firstName&&s.setValue("firstName",i.newNames.firstName),void 0!==i.newNames.lastName&&s.setValue("lastName",i.newNames.lastName)),i})(e)}.bind(this),e.FetcherErrorLogger(a))}}}),"@VERSION@",{requires:["flickr-promise"],optional:["person-public-profile-models"]});YUI.add("person-public-profile-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-profile-getProfile"].run(t,this.appContext)},updateField:function(t,r){return e.ModelUpdaters["flickr-profile-setProfile"].run(t,r)},updateFirstAndLastName:function(t,r){return e.ModelUpdaters["flickr-account-changeFirstAndLastName"].run(t,r)}},remoteUpdateDescription:function(e,t,r){return this.setValue(e,"description",t.description),this.remote.updateBioField(t,r)},attributes:{nsid:{readOnly:!0,defaultFn:function(e){return e}},joinedDate:{validator:function(t){return e.AttributeHelpers.validateDate(t)},setter:function(t){return e.AttributeHelpers.coerceDate(t)},serialize:function(e){return e.format("X")},deserialize:function(t){return e.moment(t,"X")}},showcaseSetId:{defaultValue:"0"},city:{},country:{},firstName:{},lastName:{},hometown:{},email:{},occupation:{},profileDescription:{},profileDescriptionExpanded:{},timezone:{},website:{},facebook:{},facebookUrl:{},instagram:{},instagramUrl:{},tumblr:{},tumblrUrl:{},twitter:{},twitterUrl:{},pinterest:{},pinterestUrl:{},totalViews:{},totalTags:{},totalGeotagged:{},totalFaves:{},totalInGroup:{}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-profile-getProfile-fetcher","flickr-profile-setProfile-updater","flickr-account-changeFirstAndLastName-updater","moment"]});YUI.add("flickr-profile-getProfile-fetcher",(function(e,r){"use strict";e.namespace("ModelFetchers")["flickr-profile-getProfile"]={run:function(t,s){var o=this,i=s.getViewer();return i&&i.signedIn&&(t.id===i.nsid||t.nsid===i.nsid)&&(t.storage=1),new e.FlickrPromise({apiResponse:s.callAPI("flickr.profile.getProfile",this._processParams(t,s),!0),personPublicProfileModelRegistry:s.getModelRegistry("person-public-profile-models")}).then((function(e){return o._processResponse(e,t,s)}),e.FetcherErrorLogger(r))},_processParams:function(r,t){var s={datecreate:1};if(s.extras=e.APIHelper.request.getRebootPeopleExtras(),YUI.Env.isServer&&r.id===t.request.probableUser&&(s.storage=1,s.extras+=", classic_user_id, timezone_dst, unified_search_view_pref, photostream_view_order_pref, photostream_view_as_pref, album_view_layout, download_pref",s.extras+=", products_features",s.extras+=", is_minor"),r.extras&&"string"==typeof r.extras&&r.extras.length>0&&(s.extras=s.extras+","+r.extras),r.id)s.user_id=r.id;else{if(!r.pathAlias)throw new Error("`fetch` is missing required params.");s.path_alias=r.pathAlias}return r.storage&&(s.storage=r.storage),s.extras||(s.extras=""),s.extras+=", has_stats,expand_bbml,social_urls",r.hideStats||(s.extras+=",with_stats"),s},_processResponse:function(e,r,t){var s=e.apiResponse,o=e.personPublicProfileModelRegistry,i={};if(s&&s.profile){var a=s.profile,l=s.stats;return i={city:a.city,country:a.country,firstName:a.firstName,lastName:a.lastName,hometown:a.hometown,email:a.email,nsid:a.nsid,id:a.nsid,showcaseSetId:a.showcaseSet||"0",joinedDate:a.join_date,occupation:a.occupation,profileDescription:a.profileDescription,profileDescriptionExpanded:a.profileDescriptionExpanded,website:a.website,twitter:a.twitter,twitterUrl:a.twitterUrl,instagram:a.instagram,instagramUrl:a.instagramUrl,facebook:a.facebook,facebookUrl:a.facebookUrl,tumblr:a.tumblr,tumblrUrl:a.tumblrUrl,pinterest:a.pinterest,pinterestUrl:a.pinterestUrl,totalViews:l?l.photoViews:0,totalTags:l?l.tags:0,totalGeotagged:l?l.geotagged:0,totalFaves:l?l.faves:0,totalInGroup:l?l.groups:0},o.addOrUpdate(i)}}}}),"@VERSION@",{requires:["flickr-promise"],optional:["person-models","person-relationship-models","person-preferences-models","person-profile-models","person-public-profile-models","person-groups-models","photostream-models","api-helper"]});YUI.add("hermes-template-gift-pro-checkout-page",(function(t,e){var n=t.Template.Handlebars.revive({1:function(t,e,n,l,a){var i,o=null!=e?e:t.nullContext||{},s=t.hooks.helperMissing,r="function",c=t.escapeExpression,m=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t\t\t<option value="+c(typeof(i=null!=(i=m(n,"product_id")||(null!=e?m(e,"product_id"):e))?i:s)===r?i.call(o,{name:"product_id",hash:{},data:a,loc:{start:{line:9,column:21},end:{line:9,column:35}}}):i)+">"+c(typeof(i=null!=(i=m(n,"amount")||(null!=e?m(e,"amount"):e))?i:s)===r?i.call(o,{name:"amount",hash:{},data:a,loc:{start:{line:9,column:36},end:{line:9,column:46}}}):i)+"</option>\n"},3:function(t,e,n,l,a){var i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t\t"+t.escapeExpression((i(n,"intlMessage")||e&&i(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{name:null!=e?i(e,"prefillGiverName"):e,intlName:"gift-pro.SEND_FROM_WITHOUT_MESSAGE"},data:a,loc:{start:{line:15,column:6},end:{line:15,column:89}}}))+"\n"},5:function(t,e,n,l,a){var i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t\t"+t.escapeExpression((i(n,"intlMessage")||e&&i(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{name:null!=e?i(e,"anonymous"):e,intlName:"gift-pro.SEND_FROM_WITHOUT_MESSAGE"},data:a,loc:{start:{line:17,column:6},end:{line:17,column:82}}}))+"\n"},7:function(t,e,n,l,a){var i,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression("function"==typeof(i=null!=(i=o(n,"prefillGiverName")||(null!=e?o(e,"prefillGiverName"):e))?i:t.hooks.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"prefillGiverName",hash:{},data:a,loc:{start:{line:25,column:158},end:{line:25,column:178}}}):i)},9:function(t,e,n,l,a){var i,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression("function"==typeof(i=null!=(i=o(n,"prefillGiverEmail")||(null!=e?o(e,"prefillGiverEmail"):e))?i:t.hooks.helperMissing)?i.call(null!=e?e:t.nullContext||{},{name:"prefillGiverEmail",hash:{},data:a,loc:{start:{line:42,column:163},end:{line:42,column:184}}}):i)},compiler:[8,">= 4.3.0"],main:function(t,e,n,l,a){var i,o=null!=e?e:t.nullContext||{},s=t.hooks.helperMissing,r=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="gift-checkout-container">\n\t<div class="step1 gift-plan-options">\n\t\t<div class="payment-method-view">\n\t\t\t<form id="gift-pro-form">\n\t\t\t\t<label for="amount">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.CHOOSE_AMOUNT"},data:a,loc:{start:{line:5,column:24},end:{line:5,column:73}}}))+'</label>\n\t\t\t\t<div class="gift-pro-field">\n\t\t\t\t\t<select type="text" class="short" id="giftDuration">\n'+(null!=(i=c(n,"each").call(o,null!=e?c(e,"duration"):e,{name:"each",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:8,column:6},end:{line:10,column:15}}}))?i:"")+'\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<p id="giver-info">\n'+(null!=(i=c(n,"if").call(o,null!=e?c(e,"prefillGiverName"):e,{name:"if",hash:{},fn:t.program(3,a,0),inverse:t.program(5,a,0),data:a,loc:{start:{line:14,column:5},end:{line:18,column:12}}}))?i:"")+'\t\t\t\t\t<a class="enable-change-giver-info">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.CHANGE_GIVER_NAME"},data:a,loc:{start:{line:19,column:41},end:{line:19,column:94}}}))+'</a>\n\t\t\t\t</p>\n\t\t\t\t<a class="help-article" target="_blank" rel="noopener noreferrer" href="https://www.flickrhelp.com/hc/en-us/articles/4404079197076-Gifting-Pro">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.HOW_DOES_GIFTING_WORK"},data:a,loc:{start:{line:21,column:148},end:{line:21,column:205}}}))+'</a>\n\t\t\t\t<div class="optional-gift-pro-fields" style="display: none;">\n\t\t\t\t\t<div class="gift-pro-field">\n\t\t\t\t\t\t<label for="name">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.YOUR_NAME_OPTIONAL"},data:a,loc:{start:{line:24,column:24},end:{line:24,column:78}}}))+" — "+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.YOUR_NAME_OPTIONAL_TIP"},data:a,loc:{start:{line:24,column:81},end:{line:24,column:139}}}))+'</label>\n\t\t\t\t\t\t<input type="text" id="giverName" name="name" placeholder="'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.ANONYMOUS"},data:a,loc:{start:{line:25,column:65},end:{line:25,column:110}}}))+'" maxlength="50" value="'+(null!=(i=c(n,"if").call(o,null!=e?c(e,"prefillGiverName"):e,{name:"if",hash:{},fn:t.program(7,a,0),inverse:t.noop,data:a,loc:{start:{line:25,column:134},end:{line:25,column:185}}}))?i:"")+'"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="gift-pro-field final">\n\t\t\t\t\t\t<label for="note">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.YOUR_MESSAGE_OPTIONAL"},data:a,loc:{start:{line:28,column:24},end:{line:28,column:81}}}))+'</label>\n\t\t\t\t\t\t<input type="text" id="giftNote" name="note" placeholder="'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.GIFT_MESSAGE_NOTE_PLACEHOLDER"},data:a,loc:{start:{line:29,column:64},end:{line:29,column:129}}}))+'" maxlength="500"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="field-container button-container">\n\t\t\t\t\t<button class="btn btn-confirm continue-to-payment">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"stats.NEXT"},data:a,loc:{start:{line:33,column:57},end:{line:33,column:94}}}))+'</button>\n\t\t\t\t</div>\n\t\t\t</form>\t\n\t\t</div>\n\t</div>\n\t<div class="step2 gift-payment-method" style="display: none;">\n\t\t<div class="gift-plan-options">\n\t\t\t<p class="giver-email with-payment-element">\n\t\t\t\t<label for="email">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.YOUR_EMAIL_ADDRESS"},data:a,loc:{start:{line:41,column:23},end:{line:41,column:77}}}))+" — "+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.WE_SEND_RECEIPT"},data:a,loc:{start:{line:41,column:80},end:{line:41,column:131}}}))+'</label>\n\t\t\t\t<input type="email" required id="giverEmail" name="email" placeholder="'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.PLEASE_ENTER_EMAIL"},data:a,loc:{start:{line:42,column:75},end:{line:42,column:129}}}))+'" value="'+(null!=(i=c(n,"if").call(o,null!=e?c(e,"prefillGiverEmail"):e,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:42,column:138},end:{line:42,column:191}}}))?i:"")+'"/>\n\t\t\t\t<span class="error">'+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||s).call(o,{name:"intlMessage",hash:{intlName:"gift-pro.A_VALID_EMAIL_REQUIRED"},data:a,loc:{start:{line:43,column:24},end:{line:43,column:82}}}))+"</span>\n\t\t\t</p>\n\t\t</div>\n\t\t"+r((c(n,"outlet")||e&&c(e,"outlet")||s).call(o,null!=e?c(e,"payment-method-view"):e,{name:"outlet",hash:{},data:a,loc:{start:{line:46,column:2},end:{line:46,column:32}}}))+"\n\t</div>\n</div>\n\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/gift-pro-checkout-page",(function(e,a){return(a=a||{}).partials=a.partials?t.merge(l,a.partials):l,n(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-checkout-legal-renewal-text",(function(e,l){var t=e.Template.Handlebars.revive({1:function(e,l,t,n,r){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t<p class="legal-text">'+e.escapeExpression((a(t,"intlHTMLMessage")||l&&a(l,"intlHTMLMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlHTMLMessage",hash:{urlTerms:"/help/terms",urlPolicy:"/help/privacy",intlName:"checkout.LEGAL_TERMS_GIFT"},data:r,loc:{start:{line:2,column:23},end:{line:2,column:128}}}))+"</p>\n"},3:function(e,l,t,n,r){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t<p class="legal-text">'+e.escapeExpression((a(t,"intlHTMLMessage")||l&&a(l,"intlHTMLMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlHTMLMessage",hash:{urlTerms:"/help/terms",urlPolicy:"/help/privacy",intlName:"checkout.AGREE_TO_TERMS"},data:r,loc:{start:{line:4,column:23},end:{line:4,column:126}}}))+"</p>\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,n,r){var a,s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return null!=(a=s(t,"if").call(null!=l?l:e.nullContext||{},null!=l?s(l,"isGift"):l,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r,loc:{start:{line:1,column:0},end:{line:5,column:7}}}))?a:""},useData:!0}),n={};e.Array.each([],(function(l){var t=e.Template.get("hermes/"+l);t&&(n[l]=t)})),e.Template.register("hermes/checkout-legal-renewal-text",(function(l,r){return(r=r||{}).partials=r.partials?e.merge(n,r.partials):n,t(l,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});